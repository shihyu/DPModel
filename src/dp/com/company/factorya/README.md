#抽象工廠模式(Abstract Factory Pattern) 
定義：Provide an interface for creating families of related or dependent objects without specifying their concrete classes。為創建一組相關或相互依賴的對象提供一個接口，而且無需指定它們的具體類。  

抽象工廠模式的類圖如下圖：  
![Alt text](factorya.jpg "抽象工廠模式類圖")


抽象工廠模式是工廠方法模式的升級版本，在有多個業務品種、業務分類時，通過抽象工廠模式產生需要的對象是一種非常好的解決方式。    


#抽象工廠模式應用
##1.抽象工廠模式的優點
 * 封裝性，每個產品的實現類不是高層模塊要關係的，要關心的是什麼？是接口，是抽象，它不關心對象是如何創建出來，這由誰負責呢？工廠類，只要知道工廠類是誰，我就能創建出一個需要的對象，省時省力，優秀設計就應該如此。
 * 產品族內的約束為非公開狀態。例如生產男女比例的問題上，猜想女媧娘娘肯定有自己的打算，不能讓女盛男衰，否則女性的優點不就體現不出來了嗎？那在抽象工廠模式，就應該有這樣的一個約束：每生產1個女性，就同時生產出1.2個男性，這樣的生產過程對調用工廠類的高層模塊來說是透明的，它不需要知道這個約束，我就是要一個黃色女性產品就可以了，具體的產品族內的約束是在工廠內實現的。


##2.抽象工廠模式的缺點 
抽象工廠模式的最大缺點就是產品族擴展非常困難，為什麼這麼說呢？我們以通用代碼為例，如果要增加一個產品C，也就是說有產品家族由原來的2個，增加到3個，看看我們的程序有多大改動吧！抽象類AbstractCreator要增加一個方法createProductC()，然後，兩個實現類都要修改，想想看，這在項目中的話，還這麼讓人活！嚴重違反了開閉原則，而且我們一直說明抽象類和接口是一個契約，改變契約，所有與契約有關係的代碼都要修改，這段代碼叫什麼？叫“有毒代碼”，——只要這段代碼有關係，就可能產生侵害的危險！  


##3.抽象工廠模式的使用場景
抽象工廠模式的使用場景定義非常簡單：一個對象族（或是一組沒有任何關係的對象）都有相同的約束，則可以使用抽象工廠模式，什麼意思呢？例如一個文本編輯器和一個圖片處理器，都是軟件實體，但是*nix下的文本編輯器和WINDOWS下的文本編輯器雖然功能和界面都相同，但是代碼實現是不同的，圖片處理器也是類似情況，也就是具有了共同的約束條件：操作系統類型，於是我們可以使用抽象工廠模式，產生不同操作系統下的編輯器和圖片處理器。  


##4.抽象工廠模式的注意實現
在抽象工廠模式的缺點中，我們提到抽象工廠模式的產品族擴展比較困難，但是一定要清楚是產品族擴展困難，而不是產品等級，在該模式下，產品等級是非常容易擴展的，增加一個產品等級，只要增加一個工廠類負責新增加出來的產品生產任務即可，也就是說橫向擴展容易，縱向擴展困難。以人類為例子， 產品等級中只要男、女兩個性別，現實世界還有一種性別：雙性人，即使男人也是女人（俗語就是陰陽人），那我們要擴展這個產品等級也是非常容易的，增加三個產品類，分別對應不同的膚色，然後再創建一個工廠類，專門負責不同膚色人的雙性人的創建任務，完全通過擴展來實現的需求的變更，從這一點上看，抽象工廠模式是符合開閉原則的。  


#最佳實踐
一個模式在什麼情況下才能夠使用，是很多讀者比較困惑的地方，抽象工廠模式是一個簡單的模式，使用的場景非常多，大家在軟件產品開發過程中，涉及到不同操作系統的時候，都可以考慮使用抽象工廠模式，例如一個應用，需要在三個不同平臺上運行：Windows、Linux、Android（Google發佈的智能終端操作系統）上運行，你會怎麼設計？分別設計三套不同的應用？非也非也，通過抽象工廠模式屏蔽掉操作系統對應用的影響。三個不同操作系統上的軟件功能、應用邏輯、UI都應該是非常類似，唯一不同的是調用不同的工廠方法，由不同的產品類去處理與操作系統交互的信息。  
