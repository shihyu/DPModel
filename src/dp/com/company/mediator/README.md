#中介者模式(Mediator Pattern) 
定義：Define an object that encapsulates how a set of objects interact. Mediator promotes loose coupling by keeping objects from referring to each other explicitly, and it lets you vary their interaction independently.（用一箇中介對象封裝一系列的對象交互，中介者使各對象不需要顯示地相互作用，從而使其耦合鬆散，而且可以獨立地改變它們之間的交互。）  


中介者模式的通用類圖如下圖：  
![Alt text](mediator.jpg "中介者模式類圖")

從類圖中看，中介者模式由以下幾部分組成：

- Mediator抽象中介者角色：抽象中介者角色定義統一的接口，用於個同事角色之間的通訊。
- Concrete Mediator具體中介者角色：具體中介者角色通過協調同事角色實現協作行為，因此它必須依賴於各同事角色。
- Colleague同事角色：每一個同事角色都知道中介者角色，而且與其它的同事角色通訊的時候，一定要通過中介者角色協作。每個同事類的行為分為兩種：一種是同事本身的行為，比如改變對象本身的狀態，處理自己的行為等，這種方法叫做自發行為(Self-Method)，與其它的同事類或中介者沒有任何的依賴；第二種是必須依賴中介者才能完成的行為，叫做依賴方法(Dep-Method)。


#中介者模式應用
##1.中介者模式的優點
 中介者模式的優點就是減少類間的依賴，把原有的一對多的依賴變成了一對一的依賴，同事類只依賴中介者，減少了依賴，當然同時也降低了類間的耦合。  


##2.中介者模式的缺點 
中介者模式的缺點就是中介者會膨脹得很大，而且邏輯複雜，原本N個對象直接的相互依賴關係轉換為中介者和同事類的依賴關係，同事類越多，中介者的邏輯就越複雜。  


##3.中介者模式的使用場景
中介者模式簡單，但是簡單不代表容易使用，很容易被誤用。在面向對象的編程中，對象和對象之間必然會有依賴關係，如果某個類和其他類沒有任何相互依賴的關係，那這個類就是一個“孤島”，在項目中就沒有存在的必要了！就像某個人如果永遠獨立生活，與任何人都沒有關係，那這個人基本上就算是野人了——排除在人類這個定義之外。  
 類之間的依賴關係式必然存在的，一個類依賴多個類的情況也是存在的，存在即合理，那是否可以說只要有多個依賴關係就考慮使用中介者模式呢？答案是否定的。中介者模式未必能幫你把原本凌亂的邏輯整理得清清楚楚，而且中介者模式也是有缺點的，這個缺點在使用不當時會被放大，比如原本就簡單的幾個對象依賴關係，如果為了使用模式而加入了中介者，必然導致中介者的邏輯複雜化，因此中介者模式的使用需要“量力而行”！中介者模式適用於多個對象之間緊密耦合的情況，緊密耦合的標準是：在類圖中出現了蜘蛛網狀結構。在這種情況下一定要考慮使用中介者模式，這有利於蜘蛛網梳理為星型結構，使原本複雜混亂的關係變得清晰簡單。


#中介者模式的實際應用
 * 機場調度中心
 * MVC框架
 * 媒體網關
 * 中介服務  


#中介者模式的最佳實踐
中介者模式是一個非常好的封裝模式，也是一個很容易被濫用的模式。使用中介者模式必然會帶來中介者的膨脹問題。大家可以在如下的情況下嘗試使用中介者模式：

- N個對象之間產生了相互的依賴關係(N>2)。  
- 多個對象有依賴關係，但是依賴的行為尚不確定或者有發生改變的可能，在這種情況下一般建議採用中介者模式，降低變更引起的風險擴散。
- 產品開發。一個明顯的例子就是MVC框架，把中介者模式應用到產品中，可以提升產品的性能和擴展性，但是對於項目開發就未必，因此項目是以交付投產為目標，而產品則是以穩定、高效、擴展為宗旨。 